ğŸ’¡ğŸš€ğŸ¤ŸğŸ‘‰ğŸ‘‡â˜€ï¸ğŸ‰ğŸğŸ‡ğŸ“ğŸ¥•ğŸ­ğŸ–ï¸ğŸâ˜˜ï¸ğŸ€ğŸ’¯ğŸ”†â—ğŸ”¥ğŸš©

### ä¸€ã€å…¨é€‰/åé€‰æ¡†æ¡ˆä¾‹ğŸ’¡

#### 1.åŸç”Ÿjs

ä½ç½®ï¼šwepAPI day3

```
<!DOCTYPE html>

<html>

<head lang="en">
  <meta charset="UTF-8">
  <title></title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    table {
      border-collapse: collapse;
      border-spacing: 0;
      border: 1px solid #c0c0c0;
      width: 500px;
      margin: 100px auto;
      text-align: center;
    }

    th {
      background-color: #09c;
      font: bold 16px "å¾®è½¯é›…é»‘";
      color: #fff;
      height: 24px;
    }

    td {
      border: 1px solid #d0d0d0;
      color: #404060;
      padding: 10px;
    }

    .allCheck {
      width: 80px;
    }
  </style>
</head>

<body>
  <table>
    <tr>
      <th class="allCheck">
        <input type="checkbox" name="" id="checkAll"> <span class="all">å…¨é€‰</span>
      </th>
      <th>å•†å“</th>
      <th>å•†å®¶</th>
      <th>ä»·æ ¼</th>
    </tr>
    <tr>
      <td>
        <input type="checkbox" name="check" class="ck">
      </td>
      <td>å°ç±³æ‰‹æœº</td>
      <td>å°ç±³</td>
      <td>ï¿¥1999</td>
    </tr>
    <tr>
      <td>
        <input type="checkbox" name="check" class="ck">
      </td>
      <td>å°ç±³å‡€æ°´å™¨</td>
      <td>å°ç±³</td>
      <td>ï¿¥4999</td>
    </tr>
    <tr>
      <td>
        <input type="checkbox" name="check" class="ck">
      </td>
      <td>å°ç±³ç”µè§†</td>
      <td>å°ç±³</td>
      <td>ï¿¥5999</td>
    </tr>
  </table>
  <script>
    // 1. è·å–å¤§çš„å¤é€‰æ¡†
    const checkAll = document.querySelector('#checkAll')
    // 2. è·å–æ‰€æœ‰çš„å°çš„å¤é€‰æ¡†
    const cks = document.querySelectorAll('.ck')
    // 3. ç‚¹å‡»ä¸Šé¢å¤§çš„å¤é€‰æ¡†ï¼Œ ä¸‹é¢å°çš„è·Ÿéšå˜åŒ–
    checkAll.addEventListener('click', function(){
      // checkAll.checked è¡¨ç¤º ä¸Šé¢å¤é€‰æ¡† æ˜¯å¦å‹¾é€‰
      // console.log(this.checked)
      // 4. éå†æ‰€æœ‰çš„å°å¤é€‰æ¡†, è®©å¤é€‰æ¡†çš„checked ç­‰äº å¤§å¤é€‰æ¡†çš„checked  (checked å€¼ ä¸ºtrue/falseï¼Œé€‰ä¸­ä¸ºtrue)
      for (let i = 0; i < cks.length; i++) {
        cks[i].checked = this.checked
      }
    })

    // 5. å°å¤é€‰æ¡†æ§åˆ¶å¤§å¤é€‰æ¡† (åé€‰)
    for (let i = 0; i < cks.length; i++) {
      // ç»™æ¯ä¸€ä¸ªå°å¤é€‰æ¡†, ç»‘å®šç‚¹å‡»äº‹ä»¶
      cks[i].addEventListener('click', function(){
        // console.log(this)
        
        // åˆ¤æ–­æ¯æ¬¡ç‚¹å‡»çš„æ—¶å€™, è¢«é€‰ä¸­çš„å°å¤é€‰æ¡†çš„ä¸ªæ•°, æ˜¯ä¸æ˜¯ç­‰äº æ€»çš„å°å¤é€‰æ¡†çš„ä¸ªæ•°è¢«é€‰ä¸­çš„å°å¤é€‰æ¡† **.ck:checked** 
        // æ³¨æ„ï¼šæ˜¯æ¯æ¬¡ç‚¹å‡»ä¹‹åè·å–åˆ¤æ–­ï¼Œæ‰€ä»¥æ˜¯ç‚¹å‡»ä¹‹åå†è·å–è¢«é€‰ä¸­çš„å¤é€‰æ¡† 
         const checkedCks = document.querySelectorAll('.ck:checked') // è·å–æ‰€æœ‰é€‰ä¸­çš„å°å¤é€‰æ¡†
         console.log(checkedCks)
        // ä¸‹é¢ä¸€å¥è¡¨ç¤ºï¼šåˆ¤æ–­ è¢«é€‰ä¸­å°å¤é€‰æ¡†ç»„æˆçš„æ•°ç»„ çš„ é•¿åº¦ æ˜¯å¦ç­‰äº æ‰€æœ‰å°å¤é€‰æ¡†ç»„æˆçš„æ•°ç»„ çš„ é•¿åº¦
        //  å¦‚æœæ˜¯å°±ç›´æ¥èµ‹å€¼ç»™ å¤§å¤é€‰æ¡†çš„ checked
         checkAll.checked = checkedCks.length === cks.length
      })
    }
  </script>
</body>

</html>
```

#### 2.vue å®é™…å·¥ä½œä½¿ç”¨

```vue
<template>
  <div>
    <span>å…¨é€‰:</span>
    <input type="checkbox" v-model="isAll"/>
    <button @click="qufan">åé€‰</button>
    <ul>
      <li v-for="(item, i) in arr" :key="i">
        <input type="checkbox" v-model="item.c"/>
        <span>{{ item.name }}</span>
      </li>
    </ul>
  </div>
</template>

<script>
export default {
  name: 'demo-08',
  data() {
    return {
      arr: [
        {
          name: "çŒªå…«æˆ’",
          c: false,
        },
        {
          name: "å­™æ‚Ÿç©º",
          c: false,
        },
        {
          name: "å”åƒ§",
          c: false,
        },
        {
          name: "ç™½é¾™é©¬",
          c: false,
        },
      ],
    };
  },
  computed: {
    isAll: {
      // å…¨é€‰å½±å“å°é€‰,set()çš„å‚æ•°ä¸ºé¡µé¢ä¸­æ‰‹åŠ¨ä¿®æ”¹äº†åçš„è®¡ç®—ç»“æœ
      set (value) {
        this.arr.forEach(item => item.c = value)
      },
      // å°é€‰å½±å“å…¨é€‰
      get () {
        let flag = this.arr.every(val => val.c)
        return flag
      }
    }
  },
  // å–å
  methods: {
    qufan () {
      this.arr.forEach(item => item.c = !item.c)
    }
  }
};
</script>


<style scoped>


</style>

```





### äºŒã€è½®æ’­å›¾æ¡ˆä¾‹

ä½ç½®ï¼šwepAPI day2

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>è½®æ’­å›¾ç‚¹å‡»åˆ‡æ¢</title>
    <style>
      * {
        box-sizing: border-box;
      }

      .slider {
        width: 560px;
        height: 400px;
        overflow: hidden;
      }

      .slider-wrapper {
        width: 100%;
        height: 320px;
      }

      .slider-wrapper img {
        width: 100%;
        height: 100%;
        display: block;
      }

      .slider-footer {
        height: 80px;
        background-color: rgb(100, 67, 68);
        padding: 12px 12px 0 12px;
        position: relative;
      }

      .slider-footer .toggle {
        position: absolute;
        right: 0;
        top: 12px;
        display: flex;
      }

      .slider-footer .toggle button {
        margin-right: 12px;
        width: 28px;
        height: 28px;
        appearance: none;
        border: none;
        background: rgba(255, 255, 255, 0.1);
        color: #fff;
        border-radius: 4px;
        cursor: pointer;
      }

      .slider-footer .toggle button:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .slider-footer p {
        margin: 0;
        color: #fff;
        font-size: 18px;
        margin-bottom: 10px;
      }

      .slider-indicator {
        margin: 0;
        padding: 0;
        list-style: none;
        display: flex;
        align-items: center;
      }

      .slider-indicator li {
        width: 8px;
        height: 8px;
        margin: 4px;
        border-radius: 50%;
        background: #fff;
        opacity: 0.4;
        cursor: pointer;
      }

      .slider-indicator li.active {
        width: 12px;
        height: 12px;
        opacity: 1;
      }
    </style>
  </head>

  <body>
    <div class="slider">
      <div class="slider-wrapper">
        <img src="./images/slider01.jpg" alt="" />
      </div>
      <div class="slider-footer">
        <p>å¯¹äººç±»æ¥è¯´ä¼šä¸ä¼šå¤ªè¶…å‰äº†ï¼Ÿ</p>
        <ul class="slider-indicator">
          <li class="active"></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
        </ul>
        <div class="toggle">
          <button class="prev">&lt;</button>
          <button class="next">&gt;</button>
        </div>
      </div>
    </div>
    <script>
      // 1. åˆå§‹æ•°æ®
      const arr = [
        {
          url: './images/slider01.jpg',
          title: 'å¯¹äººç±»æ¥è¯´ä¼šä¸ä¼šå¤ªè¶…å‰äº†ï¼Ÿ',
          color: 'rgb(100, 67, 68)',
        },
        {
          url: './images/slider02.jpg',
          title: 'å¼€å¯å‰‘ä¸é›ªçš„é»‘æš—ä¼ è¯´ï¼',
          color: 'rgb(43, 35, 26)',
        },
        {
          url: './images/slider03.jpg',
          title: 'çœŸæ­£çš„joå¨å‡ºç°äº†ï¼',
          color: 'rgb(36, 31, 33)',
        },
        {
          url: './images/slider04.jpg',
          title: 'æç‰åˆšï¼šè®©ä¸–ç•Œé€šè¿‡Bç«™çœ‹åˆ°ä¸œæ–¹å¤§å›½æ–‡åŒ–',
          color: 'rgb(139, 98, 66)',
        },
        {
          url: './images/slider05.jpg',
          title: 'å¿«æ¥åˆ†äº«ä½ çš„å¯’å‡æ—¥å¸¸å§~',
          color: 'rgb(67, 90, 92)',
        },
        {
          url: './images/slider06.jpg',
          title: 'å“”å“©å“”å“©å°å¹´YEAH',
          color: 'rgb(166, 131, 143)',
        },
        {
          url: './images/slider07.jpg',
          title: 'ä¸€ç«™å¼è§£å†³ä½ çš„ç”µè„‘é…ç½®é—®é¢˜ï¼ï¼ï¼',
          color: 'rgb(53, 29, 25)',
        },
        {
          url: './images/slider08.jpg',
          title: 'è°ä¸æƒ³å’Œå°çŒ«å’ªè´´è´´å‘¢ï¼',
          color: 'rgb(99, 72, 114)',
        },
      ]
      // æ•´ä½“æ€è·¯åˆ†æï¼šåˆ†ä¸‰å¤§æ¿å—
      // ç¬¬ä¸€éƒ¨åˆ†ï¼šç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œå…ˆå†™å‡ºç‚¹å‡»å·¦å³ç®­å¤´çš„æ—¶å€™ï¼Œè®©å¯¹åº”çš„å†…å®¹å˜åŒ–
      // ç¬¬äºŒéƒ¨åˆ†ï¼šå°†è½®æ’­éƒ¨åˆ†çš„çš„å…¬å…±ä»£ç æŠ½ç¦»å°è£…æˆä¸€ä¸ªå‡½æ•°ï¼ˆç®€æ´ä»£ç ï¼‰
      // ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ·»åŠ å®šæ—¶å™¨ï¼Œè®©å³ç®­å¤´æ¯è¿‡ä¸€æ®µæ—¶é—´è‡ªåŠ¨ç‚¹å‡»ï¼Œæ¨¡æ‹Ÿè‡ªåŠ¨æ’­æ”¾çš„æ•ˆæœï¼ˆä½¿ç”¨ï¼šå…ƒç´ .click() ï¼‰
      // ç¬¬å››éƒ¨åˆ†ï¼šç»‘å®šmouseenter å’Œ mouseleave å…³é—­å’Œå¼€å¯ç¬¬ä¸‰éƒ¨åˆ†æ·»åŠ çš„å®šæ—¶å™¨

      // ç¬¬ä¸€éƒ¨åˆ†
      // è·å–å·¦å³ç®­å¤´
      const prev = document.querySelector('.prev')
      const next = document.querySelector('.next')
      let i = 0
      // ä¸Šä¸€ä¸ªï¼ˆprevï¼‰
      // 1. ç»‘å®šç‚¹å‡»äº‹ä»¶
      prev.addEventListener('click', function () {
        i--
        if (i === -1) {
          i = arr.length - 1
        }
        gonggong()
      })
      // å·¦ç®­å¤´
      next.addEventListener('click', function () {
        i++
        if (i === arr.length) {
          i = 0
        }
        gonggong()
      })

      // ç¬¬äºŒéƒ¨åˆ†
      // å°†è½®æ¢çš„å…¬å…±éƒ¨åˆ†æŠ½ç¦»å‡ºæ¥å°è£…æˆä¸€ä¸ªå‡½æ•°
      // 1. è·å–å¯¹åº”å…ƒç´ å¯¹è±¡ï¼ˆå›¾ç‰‡ã€æ–‡å­—ã€èƒŒæ™¯ç›’å­ã€å°åœ†ç‚¹ï¼‰
      const img = document.querySelector('.slider-wrapper img')
      const text = document.querySelector('.slider-footer p')
      const footer = document.querySelector('.slider-footer')
      function gonggong() {
        img.src = arr[i].url
        text.innerHTML = arr[i].title
        footer.style.backgroundColor = arr[i].color
        // æ”¹å˜å°åœ†ç‚¹æ ·å¼ æ’ä»–æ€æƒ³
        // å…ˆå¹²æ‰åŸæœ‰æ ·å¼
        document.querySelector('.active').classList.remove('active')
        // å†è®©è‡ªå·±æ˜¾ç¤º
        document
          .querySelector(`.slider-indicator li:nth-child(${i + 1})`)
          .classList.add('active')
      }

      // ç¬¬ä¸‰éƒ¨åˆ†
      // æ·»åŠ å®šæ—¶å™¨ï¼Œæ¨¡æ‹Ÿå³ç®­å¤´ç‚¹å‡»æ•ˆæœï¼Œè®©å†…å®¹è‡ªåŠ¨è½®æ’­
      // å¯¹è±¡.click() æ˜¯å…ƒç´ å¯¹è±¡æ‹¥æœ‰çš„æ–¹æ³•ï¼Œç”¨çš„æ—¶å€™å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œè®©å¯¹è±¡ç‚¹å‡»
      let timerId = setInterval(function () {
        next.click()
      }, 1000)

      // ç¬¬å››éƒ¨åˆ†
      // 1. è·å–æ•´ä¸ªè½®æ’­å›¾çš„å¤§ç›’å­
      const slider = document.querySelector('.slider')
      // 2.1 ç»‘å®šäº‹ä»¶mouseenter
      slider.addEventListener('mouseenter', function(){
        clearInterval(timerId)
      })
      // 2.2 ç»‘å®šäº‹ä»¶mouseleave
      slider.addEventListener('mouseleave', function(){
        timerId = setInterval(function () {
        next.click()
      }, 1000)
      })
    </script>
  </body>
</html>

```

### ä¸‰ã€é˜²æŠ–

#### 1.æ‰‹æ’•åŸä»£ç 

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button>ç‚¹å‡»</button>
    <script>
        // éœ€æ±‚ï¼šè¦æ±‚ç‚¹å‡»buttonï¼Œæ‰“å° 'æˆ‘æ˜¯é˜²æŠ–' ä¸€ç›´ç‚¹å‡»ä¸ä¼šä¸€ç›´ç”Ÿæ•ˆï¼Œéœ€è¦ä¸¤æ¬¡ç‚¹å‡»é—´éš”æ—¶é—´å¤§äºç­‰äº 500ms æ‰æ‰§è¡Œå‡½æ•°
        const btn = document.querySelector('button')

        // 1.å°†å›è°ƒå‡½æ•°å†™åœ¨ä¸Šé¢ï¼Œå†è°ƒç”¨
        const sendMag = function(x, y){
            console.log('æˆ‘æ˜¯é˜²æŠ–')
            console.log(this)
            console.log(x + y)
        }

        // 2.æ€è€ƒï¼šæ™®é€šç‚¹å‡»äº‹ä»¶æ˜¯ç‚¹å‡»äº†ï¼Œå›è°ƒå‡½æ•°å°±ç«‹å³æ‰§è¡Œï¼Œä½†éœ€æ±‚æ˜¯ç‚¹å‡»äº†ï¼Œç„¶å500msåå›è°ƒå‡½æ•°æ‰æ‰§è¡Œï¼Œæ€ä¹ˆåšï¼Ÿ
        //   ç­”æ¡ˆï¼šè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç”³æ˜ä¸€ä¸ªé˜²æŠ–å‡½æ•°ï¼Œéœ€è¦å°† ç‚¹å‡»äº‹ä»¶çš„å›è°ƒå‡½æ•° å’Œ 500ms ä½œä¸ºè¿™ä¸ªé˜²æŠ–å‡½æ•°çš„å‚æ•°
        //         åœ¨è¿™ä¸ªé˜²æŠ–å‡½æ•°é‡Œé¢å»æ§åˆ¶ ç‚¹å‡»äº‹ä»¶å›è°ƒå‡½æ•°çš„è§¦å‘é—´éš”æ—¶é•¿
        // å‡ºç°æ–°çš„é—®é¢˜ï¼šå½“ç‚¹å‡»äº‹ä»¶è°ƒç”¨debounceå‡½æ•°è¿›è¡Œä¼ å‚æ—¶ï¼Œå°±å˜ä¸ºäº†ç«‹å³æ‰§è¡Œï¼ˆå›è°ƒå‡½æ•°ä¸èƒ½å†™æˆç«‹å³æ‰§è¡Œï¼‰ï¼Œä¸ºè§£å†³
        //   è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±åœ¨debounceè¿™ä¸ªå‡½æ•°é‡Œé¢ å†è¿”å›ï¼ˆreturnï¼‰ä¸€ä¸ªå‡½æ•°ï¼ˆè¿™æ ·å°±ç®—debounceå‡½æ•°çš„å†™æ³•æ˜¯åœ¨è°ƒç”¨ï¼Œ
        //   ä½†ä»»ç„¶ä¸æ˜¯ç«‹å³æ‰§è¡Œï¼‰
        const debounce = (fn, ms) => {
            let timerId
            return function(...rest){
        // 3.åˆ°è¿™ä¸ªæ—¶å€™ï¼Œç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå°±èƒ½æ‰§è¡Œreturn çš„å‡½æ•° é‡Œé¢çš„ä»£ç äº†ï¼Œä½†æ˜¯è¦è®©å®ƒ500msæ‰æ‰§è¡Œï¼Œæ‰€ä»¥å°±è¦å¼•å…¥
        //       setTimeout()å®šæ—¶å™¨äº†
        //   æ³¨ï¼šä½†æ˜¯éœ€æ±‚æ˜¯å¦‚æœè¿ç»­ç‚¹å‡»çš„äº‹ä»¶å°äº500ms åˆ™é‡æ–°è®¡æ—¶ï¼Œç›´åˆ°ä¸¤æ¬¡ç‚¹å‡»é—´éš”æ—¶é—´å¤§äºç­‰äº500ms æ‰æ‰§è¡Œå›è°ƒå‡½æ•°
        //   ä¸ºäº†è§£å†³é‡æ–°è®¡æ—¶è¿™ä¸ªé—®é¢˜ï¼Œåˆ™éœ€è¦åœ¨ç‚¹å‡»çš„æ—¶å€™ç«‹å³æ¸…é™¤å®šæ—¶å™¨ï¼Œå†å¼€å¯å®šæ—¶å™¨ï¼ˆ500msåå†ç‚¹å‡»æ˜¯å¯ä»¥æ‰§è¡Œå®šæ—¶å™¨çš„ï¼‰ï¼Œæ‰€ä»¥è¦
        //   å°†å®šæ—¶å™¨çš„ idåœ¨ **returnå‰é¢ç”³æ˜** (å› ä¸ºæ¯æ¬¡ç‚¹å‡»æ‰§è¡Œçš„ä»£ç åªæ˜¯return çš„å‡½æ•°ï¼Œå¦‚æœåœ¨return çš„å‡½æ•°çš„é‡Œç”³æ˜
        //   åˆ™æ¯æ¬¡éƒ½æ˜¯é‡æ–°ç”³æ˜ timerId è¿™ä¸ªå˜é‡ï¼Œæ¸…é™¤å®šæ—¶å™¨å°±ä¸èµ·ä½œç”¨ã€‚å°†timerIdåœ¨å¤–é¢ç”³æ˜çš„è¯ï¼Œå°±ä¼šå½¢æˆä¸€ä¸ªé—­åŒ…ï¼Œè®©return
        //   é‡Œé¢çš„ timerId æ¯æ¬¡ç‚¹å‡»æ—¶ä¸ä¼šè¢«é‡æ–°ç”³æ˜ï¼Œä¿å­˜çš„éƒ½æ˜¯ä¸Šä¸€æ¬¡è¢«èµ‹äºˆçš„å˜é‡å€¼ï¼Œæ¸…é™¤å®šæ—¶å™¨æ‰èƒ½èµ·ä½œç”¨)
        // åˆ°ç¬¬ä¸‰æ­¥è¿™å„¿ï¼Œç²—ç•¥çš„é˜²æŠ–å‡½æ•°å°±åšå¥½äº†ã€‚ 

        // 4.ç¬¬ä¸‰æ­¥å®Œæˆåä¸ºä»€ä¹ˆæ˜¯ç²—ç•¥å®Œæˆï¼Ÿå› ä¸ºæ­¤æ—¶fnåœ¨setTimeout()é‡Œé¢ï¼Œè€ŒsetTimeout()é‡Œé¢çš„thisåˆæ˜¯æŒ‡å‘window
        //   ï¼ˆè€Œæ­£å¸¸ä½¿ç”¨ç‚¹å‡»äº‹ä»¶æ—¶ï¼Œå›è°ƒå‡½æ•°é‡Œé¢çš„thisæ˜¯æŒ‡å‘ ç»‘å®šäº‹ä»¶çš„å…ƒç´ ï¼‰
        //  è§£å†³thisæŒ‡å‘çš„åŠæ³•ï¼šå°†å®šæ—¶å™¨æ”¹ä¸ºç®­å¤´å‡½æ•°(è¿™æ—¶ï¼Œå®šæ—¶å™¨é‡Œé¢çš„thiså°±æŒ‡å‘äº†return çš„å‡½æ•°äº†ï¼Œè€Œreturn çš„å‡½æ•°åˆæ˜¯è¢«
        //  btnè°ƒç”¨çš„ï¼Œæ‰€ä»¥...)ï¼Œå†å°†fn é€šè¿‡æ”¹å˜thisçš„æ–¹æ³•ï¼Œè®©å…¶æŒ‡å‘å®šæ—¶å™¨é‡Œé¢çš„this

        // 5.å¦‚æœfnå›è°ƒå‡½æ•°é‡Œé¢éœ€è¦ä¼ å‚è¿›è¡Œæ“ä½œï¼Œåˆ™éœ€è¦è§£å†³ä¼ å‚é—®é¢˜
        //   æ€æ ·è§£å†³ï¼Ÿï¼ˆ1ï¼‰åœ¨ç‚¹å‡»äº‹ä»¶çš„å›è°ƒå‡½æ•°å“ªå„¿åŠ ä¸Š bind(btn, å‚æ•°)ï¼ˆå› ä¸ºbindä¸ä¼šç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰
        //             (2) åœ¨return çš„å‡½æ•°é‡Œé¢ ç”¨å‰©ä½™å‚æ•°æ¥æ”¶ fn ä¼ è¿‡æ¥çš„å‚ï¼ˆåˆå› ä¸ºå‰©ä½™å‚æ•°å½¢æˆçš„æ˜¯ä¸€ä¸ªçœŸæ•°ç»„ï¼Œæ‰€ä»¥
        //                 setTimeout()é‡Œé¢æ”¹å˜ fn this æŒ‡å‘çš„æ—¶å€™è¦ç”¨ apply()æ–¹æ³• ï¼‰
                clearTimeout(timerId)
                timerId = setTimeout(() => {
                    fn.apply(this, rest)
                }, ms)

            }
        }


        // 1.å°†å›è°ƒå‡½æ•°å†™åœ¨ä¸Šé¢ï¼Œå†è°ƒç”¨
        // 2.é€šè¿‡ç¬¬äºŒæ­¥ è°ƒç”¨é˜²æŠ–å‡½æ•°debounceå‡½æ•° è°ƒç”¨æ—¶ï¼Œå°†æœ€å¼€å§‹éœ€è¦æ‰§è¡Œçš„å‡½æ•°è¿›è¡Œä¼ å‚
        btn.addEventListener('click', debounce(sendMag, 500).bind(btn, 1, 2))

    </script>
</body>
</html>

```

#### 2. åˆ©ç”¨*lodash*è¿›è¡Œè¾“å…¥æ¡†é˜²æŠ–æ“ä½œ

åˆ©ç”¨ *ç›‘å¬å™¨*ç›‘å¬è¾“å…¥æ¡†åŒå‘ç»‘å®šçš„æ–‡æœ¬ï¼Œé…åˆ*lodash*ç»„ä»¶ä¸­çš„*debounce()*è¿›è¡Œæ“ä½œï¼š

```vue
watch: {
    // ç›‘å¬æœç´¢æ¡†å†…å®¹å˜åŒ–ï¼Œè·å–è”æƒ³åˆ—è¡¨
    searchText: { // searchTextä¸ºåŒå‘ç»‘å®šçš„è¾“å…¥æ¡†æ–‡æœ¬
      // å¼•å…¥lodash ä¸­çš„ debounce è¿›è¡Œé˜²æŠ–æ“ä½œ
      handler: debounce(function () {
        // è°ƒç”¨æœç´¢è”æƒ³åˆ—è¡¨æ–¹æ³•
        this.getSuggests()
      }, 200),
      immediate: true // é¦–æ¬¡å±•å¼€è”æƒ³é¡µé¢ç»„ä»¶æ—¶å°±è¿›è¡Œç›‘å¬
    }
  }
```



### å››ã€èŠ‚æµ

```js
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .box {
          width: 500px;
          height: 500px;
          background-color: #ccc;
          color: #fff;
          text-align: center;
          font-size: 100px;
        }
      </style>
</head>
<body>
    <div class="box">0</div>
    <script>
        // èŠ‚æµï¼ˆthrottleï¼‰ï¼šæŒç»­çš„è§¦å‘äº‹ä»¶ï¼Œåœ¨ä¸€æ®µæ—¶é—´å†…å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ï¼ˆç›¸å½“äºè§„å®šå‡½æ•°æ‰§è¡Œçš„é—´éš”æ—¶é—´ï¼Œ
        //    å¦‚æœä¸èŠ‚æµæ“ä½œï¼Œå‡½æ•°ä¼šä¸€ç›´æ‰§è¡Œï¼‰

        // åº”ç”¨åœºæ™¯ï¼š1.æµè§ˆå™¨çª—å£ç¼©æ”¾ï¼ˆresize äº‹ä»¶ï¼‰
        //          2.scrollæ»šåŠ¨äº‹ä»¶ï¼Œmousemove äº‹ä»¶

        // èŠ‚æµåéœ€è¦æ‰§è¡Œçš„å‡½æ•°
        const box = document.querySelector('.box')
        let i = 1
        function move(x, y){
            box.innerHTML = i++
            console.log(x + y)
        }

        const thrittle = (fn, ms = 0) => {
            let pre = 0
            return function(...rest){
                // é¼ æ ‡ç§»åŠ¨ä¸€ä¸‹ï¼Œå°±è®°å½•ä¸€ä¸‹å½“å‰æ—¶é—´æˆ³
                let now = Date.now()
                if(now - pre >= ms){
                    fn.apply(this, rest)
                    pre = Date.now()   // è®°å½•å½“å‰æ—¶é—´ï¼Œä½œä¸ºä¸‹ä¸€æ¬¡æ—¶é—´çš„èµ·ç‚¹
                    console.log(this) 
                }
            }
        }
        
        box.addEventListener('mousemove', thrittle(move, 500).bind(box, 1, 2))


    </script>
</body>
</html>
```

### äº”ã€åŒé‡forå¾ªç¯(å»é‡ã€æ’åº)

#### 1.æ•°ç»„å»é‡

```js
       const arr = [5, 4, 8, 6, 7, 2, 4, 5, 7, 9]
        //åŒé‡forå¾ªç¯æ•°ç»„å»é‡
        const newArr = []
        for (let i = 0; i < arr.length; i++) {
            let flag = false
            for (let j = 0; j < newArr.length; j++) {
                if(arr[i] === newArr[j]){
                    flag = true
                    break
                }
            }
            if(!flag){
                newArr.push(arr[i])
            }
        }
```

#### 2.æ•°ç»„å†’æ³¡æ’åº

```js
      // å¤–å±‚å¾ªç¯ï¼š æ§åˆ¶ æ¯”è¾ƒçš„è½®æ•°
      // å†…å±‚å¾ªç¯ï¼š æ§åˆ¶çš„æ˜¯ æ¯ä¸€è½®æ¯”è¾ƒçš„æ¬¡æ•°ï¼Œäº¤æ¢ä¸¤ä¸ªå˜é‡
      const arr = [2, 5, 4, 8, 3, 3, 5]
      //ç¬¬ä¸€å±‚å¾ªç¯,éœ€è¦æ¯”è¾ƒ arr.length - 1 æ¬¡
      for (let i = 0; i < arr.length - 1; i++) {
        // ç¬¬äºŒå±‚å¾ªç¯
        for (let j = 0; j < arr.length - 1 - i; j++) {
          if (arr[j] > arr[j + 1]) {
            ;[arr[j + 1], arr[j]] = [arr[j], arr[j + 1]]
          }
        }
      }
```

### å…­ã€åŸç”ŸJS ajax è¯·æ±‚

```js
<script>
      // 1.é€šè¿‡ new XMLHttpRequest() å¾—åˆ°ä¸€ä¸ªå®ä¾‹å¯¹è±¡
      let xhr = new XMLHttpRequest()

      // 2.é€šè¿‡open()å¯åŠ¨ä¸€ä¸ªhttpè¯·æ±‚ï¼Œ æ³¨æ„ï¼šè¿™é‡Œä¹‹æ—¶å‡†å¤‡ä¸€ä¸ªè¯·æ±‚ï¼Œç­‰å¾…å‘é€ï¼›
      xhr.open('get', 'http://ajax-base-api-t.itheima.net/api/getbooks')

      // 3.é€šè¿‡ xhr ç»‘å®šç›‘å¬äº‹ä»¶ï¼Œè¯·æ±‚æˆåŠŸå°±æ‰§è¡Œè¿™é‡Œé¢çš„ä»£ç 
      xhr.addEventListener('load', function () {
        console.log(this.status)
        console.log(this.response)
        // æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯è¿”å›å€¼æ˜¯jsonå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬è¦æŠŠå…¶è½¬æ¢ä¸ºjså¯¹è±¡æˆ–æ•°ç»„
        const res = JSON.parse(this.response)
      })
      // 4.ç»™xhr ç»‘å®š error äº‹ä»¶ï¼Œå½“è¯·æ±‚ä¸æˆåŠŸæ—¶ï¼Œæ‰§è¡Œè¿™é‡Œé¢çš„ä»£ç 
      xhr.addEventListener('error', function (err) {
        alert('ç½‘ç»œå¼‚å¸¸')
      })

      // 5.å‘é€è¯·æ±‚
      xhr.send()
```

### ä¸ƒã€æ‰‹å†™é€’å½’è¿›è¡Œæ·±æ‹·è´

```js
<script>
        const obj = {
            uname: 'pink',
            age: 18,
            hobby: ['ä¹’ä¹“çƒ', 'è¶³çƒ'],
            family: {
                baby: 'å°pink'
            }
        }
        // 1. ç”³æ˜ç©ºæ•°ç»„æ¥æ”¶æ–°çš„æ‹·è´çš„å¯¹è±¡
        const cloneObj = {}

        // 2. ç”³æ˜ä¸ªå‡½æ•°ï¼Œåˆ©ç”¨for in æ•°ç»„å¾ªç¯è¿›è¡Œèµ‹å€¼æ‹·è´
        const deepClone = function(newObj, oldObj){
            for (let k in oldObj) {
                // 3. è¿›è¡Œå¤æ‚ç±»å‹åˆ¤æ–­(**ä¸€å®šè¦å…ˆå…ˆè¿›è¡Œæ•°ç»„åˆ¤æ–­å†è¿›è¡Œå¯¹è±¡åˆ¤æ–­**)
                if(oldObj[k] instanceof Array) {
                    // ç”³æ˜ç©ºæ•°ç»„
                    newObj[k] = []
                    // è°ƒç”¨å¤–å±‚å‡½æ•°
                    deepClone(newObj[k], oldObj[k])
                } else if(oldObj[k] instanceof Object) {
                    // ç”³æ˜ç©ºå¯¹è±¡
                    newObj[k] = {}
                    // è°ƒç”¨å¤–å±‚å‡½æ•°
                    deepClone(newObj[k], oldObj[k])
                } else {
                    newObj[k] = oldObj[k]
                }
            }
        }

        // 4. è°ƒç”¨è¯¥å‡½æ•°è¿›è¡Œæ·±æ‹·è´
        deepClone(cloneObj, obj)
        console.log(cloneObj)
    </script>
```

### å…«ã€è·å–æ–‡ç« åˆ—è¡¨å¹¶é“ºè®¾æ•°æ®



```vue
<template>
  <div class="article-list-container">
    <van-pull-refresh v-model="refreshing" @refresh="onRefresh" :success-text="refreshInfo" success-duration="1500">
        <van-list
            v-model="loading"
            :finished="finished"
            finished-text="æ²¡æœ‰æ›´å¤šäº†"
            :error.sync="error"
            error-text="è¯·æ±‚å¤±è´¥ï¼Œç‚¹å‡»é‡æ–°åŠ è½½"
            @load="onLoad">
            <ArticleItem v-for="(item, i) in list" :key="i" :item="item" />
        </van-list>
    </van-pull-refresh>

  </div>
</template>

<script>
import { getArticlesAPI } from '../../../api/index.js'
// å¼•å…¥æ¯ç¯‡æ–‡ç« ç»„ä»¶
import ArticleItem from './article-item.vue'
export default {
  naeme: 'ArticleList',
  components: {
    ArticleItem
  },
  props: {
    channels: {
      type: Object,
      default: () => ({})
    }
  },
  data () {
    return {
      list: [],
      loading: false,
      finished: false,
      timestamp: null, // æ—¶é—´æˆ³
      error: false, // å½“è¯·æ±‚æŠ¥é”™æ—¶ï¼Œä¼šå°†erroræ”¹ä¸ºtrue ï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘ @load äº‹ä»¶ï¼Œç‚¹å‡»æŠ¥é”™æç¤ºä¸»åŠ¨è§¦å‘@load
      refreshing: false, // é˜²æŠ–ï¼Œ å½“æ‰§è¡Œä¸‹æ‹‰æ›´æ–°è¯·æ±‚æ—¶ç¦æ­¢å†è§¦å‘ @refresh äº‹ä»¶
      refreshInfo: 'åˆ·æ–°æˆåŠŸ'
    }
  },
  methods: {
      // æ³¨æ„ï¼šè¯¥æ¨¡æ¿æ˜¯ç»„åˆvantç»„ä»¶è¿›è¡Œä½¿ç”¨çš„ï¼Œä½†å…¶ä»–çš„ä¹Ÿå¯ä»¥å‚è€ƒä»¥ä¸‹æ­¥éª¤
      // ä¸»è¦ä»£ç æ¨¡æ¿
    async onLoad () { // onLoadæ˜¯vantç»„ä»¶å¸¦çš„ä¸‹æ»‘åŠ è½½äº‹ä»¶
      try {
        // 1. é€šè¿‡æ¥å£è·å–æ•°æ®å¹¶é“ºè®¾
        const { data: res } = await getArticlesAPI({
          channel_id: this.channels.id,
          timestamp: this.timestamp || Date.now()
        })
        // console.log(res)

        // 2. å°†è¿”å›çš„æ—¶é—´æˆ³èµ‹å€¼ç»™å½“å‰çš„dataä¸­çš„æ—¶é—´æˆ³ - è§†ä¸šåŠ¡å…·ä½“æƒ…å†µæ”¹å˜è¯¥æ­¥éª¤ä»£ç 
        this.timestamp = res.data.pre_timestamp

        // 3. å°†è·å–åˆ°çš„æ•°æ®æ‹¼æ¥åˆ°listæ•°ç»„ä¸­å»
        this.list.push(...res.data.results)

        // 4. åŠ è½½çŠ¶æ€ç»“æŸï¼Œå¯ä»¥è¿›è¡Œä¸‹ä¸€æ¬¡åŠ è½½åŠ¨ä½œ
        this.loading = false

        // 5. æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆï¼Œåˆ¤æ–­æ˜¯å¦è¿˜æœ‰æ•°æ®ï¼Œå¹¶ä¿®æ”¹å¯ä»¥åŠ è½½çš„çŠ¶æ€å€¼
        if (res.data.results.length === 0) {
          this.finished = true
        }
      } catch (error) {
        // 6. å½“ä»£ç æŠ¥é”™æ—¶ï¼Œä¸»åŠ¨ç»“æŸåŠ è½½çŠ¶æ€
        this.loading = false
        // 7. å½“è¯·æ±‚æŠ¥é”™æ—¶ï¼Œå¼€å¯æŠ¥é”™æç¤º
        this.error = true
        console.log(error)
      }
    },
      
    // ä¸‹æ‹‰åˆ·æ–°
    async onRefresh () {
      try {
        // 1. é€šè¿‡æ¥å£è·å–æ•°æ®å¹¶é“ºè®¾
        const { data: res } = await getArticlesAPI({
          channel_id: this.channels.id,
          timestamp: Date.now()
        })
        // 2. å°†è·å–åˆ°çš„æ•°æ®æ‹¼æ¥åˆ°listæ•°ç»„ä¸­å»
        this.list.unshift(...res.data.results)

        // 3. åŠ è½½çŠ¶æ€ç»“æŸï¼Œå¯ä»¥è¿›è¡Œä¸‹ä¸€æ¬¡åŠ è½½åŠ¨ä½œ
        this.refreshing = false
        // 3.1 åˆ·æ–°æˆåŠŸåä¿®æ”¹æç¤ºæ–‡æœ¬
        this.refreshInfo = `åˆ·æ–°æˆåŠŸï¼Œæ›´æ–°äº†${res.data.results.length}æ¡æ•°æ®`
      } catch (error) {
        // 4. å½“ä»£ç æŠ¥é”™æ—¶ï¼Œä¸»åŠ¨ç»“æŸåŠ è½½çŠ¶æ€
        this.refreshing = false
        this.refreshInfo = 'åˆ·æ–°å¤±è´¥'
        console.log(error)
      }
    }
  }
}
</script>

<style scoped lang="less">
.article-list-container{
    // è¯¥æ ·å¼æ˜¯è®¾ç½®åˆ—è¡¨æ»‘åŠ¨åŒºåŸŸé«˜åº¦é€‚åº”å±å¹•
    overflow-y: auto;
    height: 79vh;
}
</style>

```

### ä¹ã€å°†ä¸€æ®µå­—ç¬¦ä¸²ä¸­æŒ‡å®šå­—ç¬¦ä¸²å˜é«˜äº®

åº”ç”¨ï¼šæœç´¢æ—¶çš„è”æƒ³æœç´¢ç»“æœåˆ—è¡¨

```js
// æœç´¢è”æƒ³é«˜äº®
    hightLight (str) {
      // æ–¹æ¡ˆä¸€ï¼šåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼ + repalce()
      // const reg = new RegExp(this.searchText, 'ig')
      // return str.replace(reg, `<span style="color: blue;">${this.searchText}</span>`)

      // æ–¹æ¡ˆäºŒï¼š ä½¿ç”¨split() å’Œ join()
      const hightLightText = `<span style="color: blue;">${this.searchText}</span>`
      return str.split(this.searchText).join(hightLightText)
    }
// ä½¿ç”¨æ—¶ç›´æ¥ä½¿ç”¨è¯¥å‡½æ•°ï¼ˆéœ€è¦è¿›è¡Œä¼ å€¼ï¼‰ï¼Œå¦‚ï¼š
	<span v-html="hightLight(item)"></span>
```

### åã€åˆ©ç”¨*cropperjs*æ’ä»¶ä¸Šä¼ å¤´åƒ

ç§»åŠ¨ç«¯

ä¸€ã€ä¸Šä¼ å›¾ç‰‡åŠè·å–å›¾ç‰‡

1.åˆ©ç”¨inputæ ‡ç­¾type="file"ç±»å‹ä¸Šä¼ å›¾ç‰‡,ç»‘å®šchangeäº‹ä»¶

```html
<input type="file" hidden ref="file" @change="changeAvater" >
```

2.åœ¨changeäº‹ä»¶è§¦å‘åè¿›è¡Œä»¥ä¸‹æ“ä½œ

```js
   // ç¼–è¾‘ä¸Šä¼ å¤´åƒ
    changeAvater () {
      // é€šè¿‡refè·å–ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ - blobç±»å‹
      const file = this.$refs.file.files[0]
      // console.log(file)

      // å°†è·å–åˆ°çš„blobç±»å‹å›¾ç‰‡è½¬æ¢ä¸ºæ™®é€šå›¾ç‰‡çš„urlæ ¼å¼è·¯å¾„ - String
      this.img = window.URL.createObjectURL(file)
      console.log(this.img)
      // ä¸€å®šè¦æ¸…ç©ºinput
      this.$refs.file.value = ''

      // æ‰“å¼€ç¼–è¾‘å¤´åƒå¼¹æ¡†
      this.showAvatarBox = true
    }
```

3.å°†è·å–åˆ°çš„*img*å˜é‡ä¼ ç»™éœ€è¦åšå›¾ç‰‡è£å‰ªçš„ç»„ä»¶ä¸­çš„imgæ ‡ç­¾çš„srcå±æ€§åšåŠ¨æ€å±æ€§

```html
<img :src="img" ref="img" />
```

äºŒ. è£å‰ªä¸Šä¼ çš„å›¾ç‰‡éƒ¨åˆ†

1.ä¸‹è½½ä¾èµ–åŒ…ï¼š

```bash
npm install cropperjs
```

2.åœ¨å¯¹åº”åœ¨ç¼–è¾‘å¤´åƒä¸Šä¼ çš„ç»„ä»¶ä¸­å¼•å…¥jsã€cssï¼š

```js
import 'cropperjs/dist/cropper.css'
import Cropper from 'cropperjs'
```

3.åœ¨mountedä¸­åˆå§‹åŒ–cropper

```vue
data () {
  return {
    cropper: null
  }
},
mounted () {
    // é€šè¿‡refè·å–åŠ è½½å›¾ç‰‡çš„é¡µé¢å…ƒç´ 
    const image = this.$refs.img
    // å®ä¾‹åŒ–cropperï¼ˆä¹Ÿæ˜¯å¯¹ä¸Šä¼ çš„å›¾ç‰‡è¿›è¡Œè£å‰ªé…ç½®çš„è¿‡ç¨‹ï¼‰
    this.cropper = new Cropper(image, {
 	  // è£å‰ªå›¾ç‰‡é…ç½®é¡¹
      viewMode: 1, // å®šä¹‰è£å‰ªæ¨¡å¼ï¼Œ0ï¼šè£å‰ªæ¡†å¯ä»¥æ‰©å±•åˆ°ç”»å¸ƒå¤–ï¼Œ 1,2,3ä¼šå°†è£å‰ªæ¡†é™åˆ¶åœ¨ç”»å¸ƒå†…
      dragMode: 'move', // æ‹–åŠ¨æ¨¡å¼ move: ç§»åŠ¨ç”»å¸ƒ
      aspectRatio: 1, // æˆªå›¾æ¯”ä¾‹, 1:1å¯ä»¥ç®€å†™ä¸º1
      autoCropArea: 1, // è‡ªåŠ¨æˆªå›¾åŒº
      cropBoxMovable: false, // æˆªå›¾åŒºåŸŸæ˜¯å¦å¯ä»¥ç§»åŠ¨
      cropBoxResizable: false, // æˆªå›¾åŒºçš„ç¼©æ”¾åŠŸèƒ½
      background: false, // æ˜¯å¦æ˜¾ç¤ºé»˜è®¤èƒŒæ™¯
      movable: true // èƒŒæ™¯å›¾ç‰‡æ˜¯å¦å¯ä»¥ç§»åŠ¨ï¼Œé»˜è®¤true
      // crop (event) { // å½“ç§»åŠ¨å›¾ç‰‡æ˜¯ä¼šè¿”å›çš„å„ç§æ•°æ®ï¼ˆä»Šå¤©çš„æ¡ˆä¾‹ä¸­ä¸éœ€è¦ä½¿ç”¨ï¼‰
      //   console.log(event.detail.x)
      //   console.log(event.detail.y)
      //   console.log(event.detail.width)
      //   console.log(event.detail.height)
      //   console.log(event.detail.rotate)
      //   console.log(event.detail.scaleX)
      //   console.log(event.detail.scaleY)
      // }
    })
}

```

ä¸‰ã€å¤„ç†è£å‰ªåçš„å›¾ç‰‡çš„ä¸¤ç§æ–¹å¼

1.åç«¯å¤„ç†

å¦‚æœåŸºäºæœåŠ¡ç«¯è£å‰ªï¼Œåˆ™ä½¿ç”¨getDataæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥å¾—åˆ°è£å‰ªåŒºåŸŸçš„å„å‚æ•°ï¼š

```
this.cropper.getData() // - å¾—åˆ°è£å‰ªåŒºåŸŸçš„å…¨éƒ¨ç›¸å…³æ•°æ®ï¼Œå°†è¯¥æ•°æ®ä¼ ç»™åç«¯ï¼Œåç«¯å…¨æƒå¤„ç†å›¾ç‰‡
```

2.å‰ç«¯å¤„ç†

```vue
methods: {
    success () {
      // å‘é€è¯·æ±‚ä¸Šä¼ å¤´åƒ
      // æ–¹æ³•2ï¼šå‰ç«¯è‡ªå·±åšè£å‰ªå·¥ä½œï¼Œé€šè¿‡cropperçš„å®ä¾‹æ–¹æ³•ï¼Œæ¥ç›´æ¥è·å–è£å‰ªåçš„å›¾ç‰‡ï¼ˆè·å–åˆ°çš„æ•°æ®æ˜¯blobç±»å‹ï¼‰
      this.cropper.getCroppedCanvas().toBlob(blob => {
        // blobå°±æ˜¯è£å‰ªåçš„å›¾ç‰‡ä¿¡æ¯ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¿™ä¸ªå›¾ç‰‡ä¿¡æ¯ä¼ ç»™åç«¯å³å¯

        // è°ƒç”¨ä¸Šä¼ å¤´åƒæ–¹æ³•
        this.updataUserPhoto(blob)
      })
    },

    // ä¸Šä¼ å¤´åƒå‡½æ•°
    async updataUserPhoto (blob) {
      // æç¤ºåŠ è½½çŠ¶æ€ï¼ˆåŠ è½½æœŸé—´ä¸èƒ½åšå…¶ä»–æ“ä½œï¼‰
      this.$toast.loading({
        message: 'å¤´åƒä¸Šä¼ ä¸­...',
        duration: 0,
        forbidClick: true // æ˜¯å¦ç¦ç”¨èƒŒæ™¯ä¸­çš„ç‚¹å‡»æ“ä½œ
      })
      try {
        // å¦‚æœä¼ ç»™åç«¯çš„æ•°æ®ç±»å‹æ˜¯ file é‚£ä¹ˆå°±å¿…é¡»è¦ç”¨FormDataä¼ é€’
        // å®ä¾‹åŒ–
        const formData = new FormData()
        // æ·»åŠ å›¾ç‰‡æ–‡ä»¶ï¼Œé”®åphotoæ˜¯åç«¯æ¥æ”¶è¯·æ±‚æ—¶è¦æˆ‘ä»¬ä¼ é€’çš„åå­—
        formData.append('photo', blob)
        // å‘é€è¯·æ±‚
        const { data: res } = await updataUserPhotoAPI(formData)

        // é€šçŸ¥çˆ¶ç»„ä»¶ä¸´æ—¶æ”¹å˜å¤´åƒ
        this.$emit('updataPhoto', res.data.photo)

        this.$toast.success('ä¸Šä¼ æˆåŠŸ')

        // å…³é—­å¤´åƒç¼–è¾‘æ¡†
        this.close()
      } catch (error) {
        console.log(error)
        this.$toast.fail('ä¸Šä¼ å¤±è´¥')
      }
    }
  }
```

åä¸€ã€æ–‡ç« è¯¦æƒ…ä¸­çš„å¤šå¼ å›¾ç‰‡æµè§ˆåŠŸèƒ½

é…åˆvantç»„ä»¶ä¸­çš„*ImagePreview å›¾ç‰‡é¢„è§ˆ*æ¨¡å—å®ç°

1.è·å–ä¸€ç¯‡æ–‡ç« ä¸­çš„æ‰€æœ‰å›¾ç‰‡çš„srcå±æ€§å€¼

```
methods: {
    // è·å–æ–‡ç« è¯¦æƒ…
    async getArticle () {
      try {
        const res = await getArticlesByIdAPI(this.articleId)
        
        // å¤šå¼ å›¾ç‰‡é¢„è§ˆåŠŸèƒ½
        // è·å–æ‰€æœ‰æ–‡ç« è¯¦æƒ…ä¸­çš„æ‰€æœ‰çš„å›¾ç‰‡domå…ƒç´ ï¼Œéœ€è¦ä½¿ç”¨setTimeoutæ¥å»¶è¿Ÿè·å–
        setTimeout(() => {
          this.getArticleImg()
        }, 0)

        // èµ‹å€¼
        this.article = res.data.data
        // console.log(this.article)
      } catch (error) {
        console.log(error)
        // å±•ç¤º404é¡µé¢
        if (error.status === 404) {
          this.loadError = 404
        }
        this.$toast('åŠ è½½å¤±è´¥')
      }
      // åŠ è½½é¡µé¢å…³é—­
      this.loading = false
    },

    // è·å–æ–‡ç« dom
    getArticleImg () {

      const imgsDom = this.$refs.articleContent.querySelectorAll('img')
      //   console.log(imgsDom)

      // å°†imgsDomä¼ªæ•°ç»„è½¬æ¢æˆçœŸæ•°ç»„
      const imgsDomArr = [...imgsDom]

      // è·å–åˆ°æ¯å¼ å›¾ç‰‡ä¸­çš„srcåœ°å€ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„
      const imgsSrc = imgsDomArr.map(item => item.src)
      //   console.log(imgsSrc)

      // ç»™æ¯ä¸ªimgç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»åè¿›è¡Œé¢„è§ˆ
      imgsDomArr.forEach((item, i) => {
        item.onclick = () => {
          // ä½¿ç”¨vantç»„ä»¶è¿›è¡Œå›¾ç‰‡é¢„è§ˆå®ç°
          ImagePreview({
            images: imgsSrc,
            startPosition: i
          })
        }
      })
    }
  }
```









