---

---

ğŸ’¡ğŸš€ğŸ¤ŸğŸ‘‰ğŸ‘‡â˜€ï¸ğŸ‰ğŸğŸ‡ğŸ“ğŸ¥•ğŸ­ğŸ–ï¸ğŸâ˜˜ï¸ğŸ€ğŸ’¯ğŸ”†â—ğŸ”¥ğŸš©

### axiosäºŒæ¬¡å°è£…

æ­¥éª¤ï¼š

 	1. åœ¨ src æ–‡ä»¶ä¸‹å»ºç«‹ *utils*æ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹å»ºç«‹ *request.js*æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­é…ç½®åŒ…æ‹¬ baseURLã€è¯·æ±‚æ‹¦æˆªå™¨ã€å“åº”æ‹¦æˆªå™¨ï¼Œä»¥ä¸‹ä»¥é…ç½® baseURLä¸ºä¾‹ï¼š

```js
// å°è£…å…¨å±€å…¬å…±axiosè¯·æ±‚
import axios from "axios"  // å¼•å…¥axiosæ’ä»¶
// é€šè¿‡axios.create()å¯¼å‡ºå‡ºå¤šä¸ª(æ ¹æ®éœ€æ±‚)å¸¦æœ‰ä¸åŒæ ¹è·¯å¾„çš„axios
export const request1 = axios.create({
    baseURL: 'http://localhost:3000'
})
// request1 ç›¸å½“äºä¸€ä¸ªå¸¦æœ‰ä¸€ä¸ªæ ¹è·¯å¾„ä¸º'http://localhost:3000'çš„axios
export const request2 = axios.create({
    baseURL: 'http://localhost:8080'
})

....
```



 	2. åœ¨ src æ–‡ä»¶ä¸‹å»ºç«‹ *api*æ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹å»ºç«‹ *å¯¹åº”ä¸šåŠ¡.js*æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­ï¼š

```js
// å¦‚ï¼šæ­Œå•æ¨¡å—åˆ—è¡¨æ¥å£

// 1.å¯¼å…¥axiosé…ç½®
import { request1 } from "../utils/request.js"

// 2.åˆ›å»ºæ¥å£æ–¹æ³•å¹¶å¯¼å‡º
export const getPersonalized = () => request({
    method: 'GET',
    url: '/personalized'
})
```



 	3.  åœ¨ src æ–‡ä»¶ä¸‹å»ºç«‹ *api*æ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹å»ºç«‹ *index.js*æ–‡ä»¶ (è¯¥æ–‡ä»¶ä¸ºæ‰€æœ‰ä¸šåŠ¡çš„ç»Ÿä¸€å‡ºå£æ–‡ä»¶ï¼Œæ‰€æœ‰ä¸šåŠ¡çš„æ¥å£éƒ½è¦å¯¼å…¥è¯¥æ–‡ä»¶ï¼Œç„¶åå†å¯¼å‡º) ï¼Œåœ¨æ–‡ä»¶ä¸­ï¼š

```js
// ç»Ÿä¸€å¯¼å‡ºapiæ¥å£å‡ºå£æ–‡ä»¶

// 1.å¯¼å‡ºå¯¹åº”ä¸šåŠ¡æ¥å£
import { getPersonalized } from './songList'

// 2.å¯¼å‡ºå¯¹åº”ä¸šåŠ¡æ¥å£
export const getPersonalizedAPI = getPersonalized
```



 4. ä¹‹åå°±å¯ä»¥åœ¨å¯¹åº”ä¸šåŠ¡vueç»„ä»¶ä¸­ä½¿ç”¨è¯¥æ¥å£ï¼Œä½¿ç”¨è¯¥æ¥å£æ—¶ï¼Œé€šè¿‡ async å’Œ await æ¥å¤„ç†promiseçš„å¼‚æ­¥æ“ä½œï¼Œå‡å°‘åµŒå¥—å±‚çº§(å›è°ƒåœ°ç‹±)ï¼›

    ä½¿ç”¨ async å’Œ await éœ€è¦æ‰‹åŠ¨æŠ›å¼‚å¸¸ï¼Œé€šè¿‡ try  catch çš„æ–¹æ³•ï¼š

```vue
<template>
  <div> </div>
</template>

<script>
	// å¯¼å…¥æ­Œå•åˆ—è¡¨api
import { getPersonalizedAPI } from '../../api/index'

export default {
  name: 'home-index',
  data () {
    return {
      // æ­Œå•åˆ—è¡¨
      songList: []
    }
  },

  async created () {
    try {
      // è·å–åˆå§‹æ•°æ®
      let res = await getPersonalizedAPI()
      console.log(res.data.result)
      this.songList = res.data.result
    } catch(error) {
      console.log(error)
    }
  },
}
</script>

<style scoped>

</style>
```



### é¡¹ç›®ä¸­jsä»£ç çš„æ‹†åˆ†æ­¥éª¤(ä»¥routerçš„é…ç½®ä¸ºä¾‹)

ä¸ºä»€ä¹ˆéœ€è¦jsä»£ç æ‹†åˆ†ï¼Ÿæ‹¿main.js æ¥è¯´ï¼Œå®é™…é¡¹ç›®ä¸­ä¼šæœ‰å¤§é‡çš„jsä»£ç å­˜åœ¨ä¸å…¶ä¸­ï¼Œå¦‚æœå…¨éƒ¨å†™åœ¨main.jsä¸­ä¼šè®©å…¶é˜…è¯»æ€§å¾ˆå·®ï¼ˆæœ¬æ¥å°±æ˜¯å…¥å£æ–‡ä»¶ï¼Œä¸è¦å¤ªå¤æ‚çš„ä»£ç ç»“æ„ï¼‰

â€‹	æ­¥éª¤ï¼š

```js
/* 
  æ‹†åˆ†jsçš„æ­¥éª¤
  1. å¤åˆ¶éœ€è¦æ‹†åˆ†çš„ä»£ç æ”¾åˆ°æ–°çš„jsæ–‡ä»¶ä¸­
  2. æŸ¥çœ‹å¤åˆ¶åä»£ç æŠ¥é”™éƒ¨åˆ†ï¼ˆæŠ¥é”™çš„åŸå› ï¼š æ²¡æœ‰å¼•å…¥ç›¸å…³çš„ä¾èµ–æ–¹æ³•ï¼‰
  3. åœ¨jsçš„æœ€åä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéƒ½ä¼šæœ‰æŸä¸€ä¸ªå˜é‡æ²¡æœ‰è¢«ä½¿ç”¨è€ŒæŠ¥é”™ï¼Œ éœ€è¦é€šè¿‡ export default è¿›è¡Œå¯¼å‡º
  4. æŸ¥é˜…å½“å‰jsæ‹†åˆ†æ–‡ä»¶ä¸­å¼•å…¥å…¶ä»–æ–‡ä»¶æ—¶çš„è·¯å¾„
  5. åœ¨åŸæ¥çš„æ–‡ä»¶ä¸­ï¼Œé€šè¿‡importå¼•å…¥çš„æ–¹å¼ï¼Œè¿›è¡Œæ–¹æ³•çš„å¼•å…¥ ï¼ˆåŸæ–‡ä»¶ä¸€å®šæœ‰ä¸€ä¸ªåœ°æ–¹å› ä¸ºæ‰¾ä¸åˆ°å£°æ˜çš„å˜é‡è€ŒæŠ¥é”™ï¼Œå¼•å…¥çš„æ–¹æ³•ã€æ•°æ®æ—¶çš„å‘½åï¼Œå°±ä»¥æŠ¥é”™çš„è¿™ä¸ªå˜é‡æ¥å‘½åï¼‰
*/
```

â€‹	ä»¥main.jsä¸­ç»„ä»¶è·¯ç”±é…ç½®çš„jsä»£ç ä¸ºä¾‹ï¼ˆå®é™…å·¥ä½œä¸­ä¹Ÿæ˜¯è¿™ä¹ˆæ‹†åˆ†çš„ï¼‰ï¼š

1. åœ¨ src ä¸‹æ–°å»º  *router*æ–‡ä»¶å¤¹ï¼Œåœ¨routeræ–‡ä»¶å¤¹ä¸‹å»ºç«‹ *index.js*æ–‡ä»¶ï¼Œå†å°†åŸæœ¬å†™åœ¨ main.js æ–‡ä»¶ä¸­çš„é…ç½®ç»„ä»¶è·¯ç”±éƒ¨åˆ†ä»£ç å‰ªåˆ‡åˆ° index.js æ–‡ä»¶ä¸­ï¼š

```js
// 1. ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„vue-routerä¾èµ–åŒ…

// 2. å¼•å…¥vue-router
import VueRouter from 'vue-router'
import Vue from 'vue' // å¼•å…¥vue

// 3. ä½¿ç”¨VueRouter
Vue.use(VueRouter)

// 4. å¼•å…¥å¯¹åº”ä¸šåŠ¡ç»„ä»¶,åˆ›å»ºè§„åˆ™æ•°ç»„
import Home from '../views/Home/home.vue'
import Layout from '../views/Layout/layout.vue'
import Play from '../views/Play/play.vue'
import Search from '../views/Search/search.vue'

let routes = [
  {
    path: '/', 
    redirect: '/layout'  
  },  // å¼€å¯é¡¹ç›®æ—¶ï¼Œé‡å®šå‘åˆ°layouté¦–é¡µ
  {
    path: '/layout',
    component: Layout,
    redirect: '/layout/home', // åˆšè¿›å…¥layoutä¸€çº§è·¯ç”±æ—¶ï¼Œç«‹å³å®šå‘åˆ°homeç»„ä»¶
    children: [
      {
        path: 'home',
        component: Home,
        meta: {  // meta ä¸ºè·¯ç”±çš„ä¸€äº›é™æ€æ•°æ®çš„æŒ‚è½½ç‚¹
          title: 'é¦–é¡µ'  
        }
      },
     ]
   },
  {
    path: '/play',
    component: Play
  }
]

// 5. åˆ›å»ºrouterå®ä¾‹
let router = new VueRouter({
  routes
})

// 6. é»˜è®¤å¯¼å‡ºrouter
export default router

// 7. åœ¨main.jsä¸­å¼•å…¥å¹¶æŒ‚è½½åˆ°vueå®ä¾‹ä¸­å»ï¼ˆ$routeï¼‰

// 8. ä½¿ç”¨å¯¹åº”ç»„ä»¶ä½¿ç”¨åªéœ€è¦åœ¨ç»„ä»¶å¯¹åº”ä½ç½®æ”¾ç½® <router-view></router-view> æ ‡ç­¾å³å¯ï¼›
```

2. åœ¨main.jsçš„æ–‡ä»¶ä¸­å¼•å…¥ router ï¼Œå†æŒ‚è½½åˆ° vue å®ä¾‹å¯¹è±¡ä¸­ï¼š

```js

import router from './router/index.js'

new Vue({ // å®ä¾‹åŒ–vueå¯¹è±¡
  router, // 6. æŒ‚è½½åˆ°vueå¯¹è±¡ä¸­
  render: h => h(App),
}).$mount('#app') 

```



### ç»„ä»¶åœ¨æ–‡ä»¶å¤¹å†…çš„å­˜æ”¾è§„åˆ™

```js
/* 
  viewsé¡µé¢ç»„ä»¶æ–‡ä»¶å¤¹å†…éƒ¨å¸ƒå±€
  1. é¡µé¢ç»„ä»¶ => è·Ÿè·¯ç”±ç»‘å®šåœ¨ä¸€èµ·çš„ç»„ä»¶ => å°±å¯ä»¥ä¸ºviewsæ–‡ä»¶å¤¹ä¸­çš„ä¸€ä¸ªæ–‡ä»¶å¤¹
  2. åŠŸèƒ½ç»„ä»¶
    2.1 å…¨å±€åŠŸèƒ½ç»„ä»¶ - å¦‚ï¼š é¡¶éƒ¨å¯¼èˆªç»„ä»¶ => æ”¾åœ¨src/components
    2.2 ä¸šåŠ¡ä¸“å±åŠŸèƒ½ç»„ä»¶ - è¯¥ç»„ä»¶çš„ç›®çš„ä¸»è¦æ˜¯å»æ‹†åˆ†ä»£ç ï¼Œæ¬¡è¦ç›®çš„æ˜¯åŒºåˆ†åŠŸèƒ½ => æ”¾åœ¨å¯¹åº”*é¡µé¢ç»„ä»¶*æ–‡ä»¶å¤¹ä¸‹çš„componentsæ–‡ä»¶å¤¹ä¸‹ 
        å¦‚ï¼š src/views/home/components
*/
```

### vuex æ˜¯å…¨å±€çŠ¶æ€ç®¡ç†å®¹å™¨é…ç½®

1. å…ˆåœ¨*utils*æ–‡ä»¶å¤¹ä¸‹å»ºç«‹*storage.js*æ–‡ä»¶ï¼Œå°†æ•°æ®æŒä¹…åŒ–(æœ¬åœ°å­˜å‚¨)çš„æ–¹æ³•è¿›è¡Œå°è£…ï¼š

```js
// å°è£…æœ¬åœ°å­˜å‚¨ï¼Œç®€åŒ–store/index.jsä¸­çš„æ“ä½œ

// 1. å¢åŠ ã€ä¿®æ”¹æœ¬åœ°å­˜å‚¨
export const setItem = (key, value) => {
  // åˆ¤æ–­å­˜å‚¨è¿›æ¥çš„æ•°æ®æ˜¯å¦æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼Œå¦‚æœæ˜¯å°±ä¸è¿›è¡ŒJSONè½¬æ¢
  if (typeof value === 'object') {
    value = JSON.stringify(value)
  }
  window.localStorage.setItem(key, value)
}

// 2. æŸ¥æ‰¾æœ¬åœ°å­˜å‚¨
export const getItem = key => {
  const data = window.localStorage.getItem(key)
  try {
    return JSON.parse(data)
  } catch (error) {
    return data
  }
}

// 3. åˆ é™¤æœ¬åœ°å­˜å‚¨
export const removeItem = key => {
  window.localStorage.removeItem(key)
}

```

2. å†åœ¨*src*æ–‡ä»¶å¤¹ä¸‹å»ºç«‹*store*æ–‡ä»¶å¤¹ï¼Œåœ¨å…¶ä¸­å»ºç«‹*index.js*æ–‡ä»¶ï¼Œå°†å…¨å±€çŠ¶æ€è¿›è¡Œç®¡ç†ï¼š

   ï¼ˆlocalStorage â€” vuexâ€” ç»„ä»¶è¿›è¡Œå­˜å‚¨ä½¿ç”¨ï¼‰

```js
// vuex æ˜¯å…¨å±€çŠ¶æ€ç®¡ç†å®¹å™¨ï¼Œå½“å„ä¸ªç»„ä»¶ä¸­éƒ½éœ€è¦ç”¨åˆ°å…¬ç”¨å˜é‡ï¼Œå°±å¯ä»¥æ”¾åˆ°è¯¥ç®¡ç†å®¹å™¨ä¸­
// å½“ vuex ä¸­çš„å˜é‡ä¿®æ”¹æ—¶ï¼Œä¼šè¢«åŠ¨çš„å½±å“æ‰€å¼•ç”¨çš„ç»„ä»¶ä¸­çš„å€¼

// 1.å½“å…¶ä»–ä¸šåŠ¡ç»„ä»¶æƒ³è¦å­˜å‚¨å…¬å…±å˜é‡åˆ°vuexä¸­æ—¶ï¼Œéœ€è¦å°†è¯¥å˜é‡é€šè¿‡ï¼š
//   this.$store.commit('åœ¨mutationsä¸­å®šä¹‰å¥½çš„æ–¹æ³•å'ï¼Œ 'éœ€è¦ä¼ é€’çš„å‚æ•°') æ¥å°†å…¬ç”¨å˜é‡ä¼ é€’åˆ° vuex ä¸­çš„mutationsä¸­çš„dataå‚æ•°ä¸­;
// 2.åœ¨å…¶ä»–ç»„ä»¶ä¸­è·å–ä½¿ç”¨vuexä¸­çš„æ•°æ®:  this.$store.state.å±æ€§å;

import { setItem, getItem } from '../utils/storage.js'
import Vue from 'vue'
import Vuex from 'vuex'

Vue.use(Vuex)

export default new Vuex.Store({
  // 1. state æ˜¯å­˜å‚¨å…¬å…±æ•°æ®çš„åœ°æ–¹ï¼Œç±»æ¯”äºdata()ä¸­çš„è¿”å›å¯¹è±¡
  state: {
    // ä½¿ç”¨å°è£…çš„å­˜å‚¨æœ¬åœ°æ•°æ®çš„æ–¹æ³•
    user: getItem('TOKEN_KEY') || {} // ä»æœ¬åœ°ä»“åº“ä¸­è·å–æ•°æ®
  },
  // 2. mutations çš„ä½œç”¨æ˜¯ï¼šå½“éœ€è¦ä¿®æ”¹stateä¸­å±æ€§çš„å€¼ï¼Œå°±å¿…é¡»é€šè¿‡è¯¥å¯¹è±¡ä¸­å®šä¹‰çš„æ–¹æ³•æ¥è¿›è¡Œä¿®æ”¹ï¼Œç±»æ¯”äºmethods
  mutations: {
    // 2.1 state å‚æ•°è¡¨ç¤º state ä¸­çš„æ‰€æœ‰å±æ€§ç»„æˆçš„å¯¹è±¡ï¼Œ data å‚æ•°è¡¨ç¤ºå¤–ç•Œä¼ é€’è¿‡æ¥çš„å‚æ•°
    setUser (data) {
      // ä½¿ç”¨å°è£…çš„å­˜å‚¨æœ¬åœ°æ•°æ®çš„æ–¹æ³•
      setItem('TOKEN_KEY', data)
    }
  },
  // 3. å¦‚æœåœ¨ mutations ä¸­ä¿®æ”¹stateå±æ€§çš„æ–¹æ³•ä¸­æ¶‰åŠåˆ°å¼‚æ­¥æ“ä½œï¼Œåˆ™å¿…é¡»åœ¨actionsä¸­è¿›è¡Œå¼‚æ­¥æ“ä½œåï¼Œå†å›åˆ°mutationsä¸­èµ‹å€¼
  actions: {
  },
  // 4. vuexä¸­çš„è®¡ç®—å±æ€§ï¼Œ ç±»æ¯”äºcomputed
  getters: {
  },
  // 5. æ¨¡å—åŒ–vuex
  modules: {
  }
})

```

