## Git

git 是一个分布式的版本控制系统 

版本控制系统 : version control system

- 本地  VCS

- 集中式 VCS  ===>  svn
- 分布式 VCS  ===>  git

### 作用

- 代码存档备份。 支持多人协作开发

## 操作命令

桌面上右键 git bash here

```bash
# 查看版本
git --version
```

#### 1. 第一步 配置用户信息

```js
git config --global user.name "your name"   # user.name后面是空格!
git config --global user.email "your email"
```

#### 2. 查看配置信息

```js
git config --list  // 列出所有配置 
git config --list --local   // 具体的项目中有配置才生效
git config --list --global  //  --global --list 可以交换位置.
git config --list --system

// 查看所有的配置和它们所在的文件
git config --list --show-origin
```

### 3. 初始一个git仓库

在需要管理的文件夹右键 git bash here 

```bash
git init
```

#### 4. 查看文件的状态

```bash
git status  

# 中文乱码 解决
git config --global core.quotepath false
```

#### 5. 跟踪新文件

```bash
git add 文件名 

# 一次性添加多个文件到暂存区
git add .

# 暂存已修改的文件
git add 文件名

?? 未跟踪的文件
A 新跟踪并添加到暂存区的文件
M 已修改的文件
clear 清空窗口  终端 cls
```

#### 6. 提交更新

- 提交一个版本,  git commit -m ""

```bash
git commit -m "msg"

# 跳过暂存区直接提交 (不用输入git add .)
git commit -a -m "跳过暂存区"
git commit -am "直接提交"

# 修改最近的一次提交信息
git commit --amend -m "修改最近一次提交信息"
```

#### 7. 查看历史记录

```bash
# 按时间先后顺序列出所有的提交历史，最近的提交在最上面
git log

# 只展示最新的两条提交历史，数字可以按需进行填写
git log -2

# 一行显示 ，hash简写
git log --oneline 

# 在一行上展示最近两条提交历史的信息
git log -2 --pretty=oneline

# 在一行上展示最近两条提交历史信息，并自定义输出的格式
# &h 提交的简写哈希值  %an 作者名字  %ar 作者修订日志  %s 提交说明
git log -2 --pretty=format:"%h | %an | %ar | %s"
```

#### 8. 回退到指定版本

```bash
# 在一行上展示所有的提交历史
git log --oneline

# 使用 git reset --hard 命令，根据指定的提交 ID 回退到指定版本
git reset --hard <CommitID>

# 可以查看所有的版本记录
git reflog 


```

#### 9. 撤销对文件的修改

```bash
git checkout -- 要撤销修改的文件  # 注意 -- 后面有一个空格
```

#### 10. 将暂存区的文件移除, 回到工作区

```bash
git reset HEAD 要移出的文件名称
# git status 再次检查

git reset HEAD .  #空格 英文点号， 把暂存区所有的文件都移到工作区
```

#### 11.  将不需要管理的文件忽略

>  .gitignore 只忽略没有被追踪的文件, 如果文件已经被纳入了管理, 则修改.gitignore无效.

解决办法 :先把本地缓存删除, 把仓库中的文件 改为  未被追踪的状态. 重新提交 

```bash
# 0. 进入项目路径

# 1. 清除本地当前的Git缓存
git rm -r --cached .

# 2. 应用.gitignore等本地配置文件重新建立Git索引
git add .

# 3. （可选）提交当前Git版本并备注说明
git commit -m 'update .gitignore'
```



-------

1. 配置user , 只需要配置1次
2. git init
3. git status 查看文件状态
4. git add . 将已修改的放到暂存区
5. git commit -m "提交到本地仓库" 
6. git log --oneline  查看提交版本记录
7. git reflog  查看所有版本
8. git reset --hard  版本ID 